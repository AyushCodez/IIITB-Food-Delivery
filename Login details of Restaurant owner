/*
1 - Add a new restaurant
2 - forgot password functionality
*/

//IMPORTING LIBRARIES
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

//CREATED 2 STRCUTURES
struct Restaurant{
    char restaurantname[30]; //note this must be unique
    char distance[3]; //it is the distance from IIITB 
    char address[50];
};
struct RestaurantOwner{
    char username[20]; //note this must be unique
    char password[20];
    char contactnumber[11];
    char emailid[40]; 
};

int main(){
    FILE *fptr;
    struct RestaurantOwner ro[100]; //array of structures
    struct Restaurant r[100]; //array of strcutures
    int cadd=0; //works like an index for the array when you want to add a restaurant and it's details
    char input[10];
    scanf("%s",input);

    if (strcmp(input,"exit")==0){
        printf("EXIT");
    }

    else if (strcmp(input,"1")==0){ // 1 is to be used to add a restaurant
        printf("Enter Restaurant name");
        scanf("%s",r[cadd].restaurantname);
        printf("Enter User name");
        scanf("%s",ro[cadd].username);
        printf("Enter Password");
        scanf("%s",ro[cadd].password);
        printf("Enter distance from IIITB");
        scanf("%s",r[cadd].distance);
        printf("Enter Contact Number");
        scanf("%s",ro[cadd].contactnumber);
        printf("Enter Email ID");
        scanf("%s",ro[cadd].emailid);
        printf("Enter Address");
        scanf("%s",r[cadd].address);
        cadd=cadd+1;
        scanf("%s",input);
    }

    else if (strcmp(input,"2")==0){ //2 is to be used when the user forgot the password
        char name[20];
        char number[11];
        char email[40];
        int flag=0;
        printf("Enter username,phonenumber and emailid");
        scanf("%s%s%s",name,number,email);
        for(int i=0;i<cadd;i++){
            if (strcmp(name,ro[i].username)==0 && strcmp(number,ro[i].contactnumber)==0 && strcmp(email,ro[i].emailid)==0){
                printf("Enter new password");
                scanf("%s",ro[i].password);
                flag=1;
                break;
            }
        }
        if (flag==0){
            printf("The above details don't match");
        }
    }
    
    else{
	    printf("HAVEFUN\n");
    }
    fptr=fopen("out_file","a");
	for(int i=0;i<cadd;i++){
		fprintf(fptr,"%s %s %s %s %s %s %s\n",r[i].restaurantname,ro[i].username,ro[i].password,r[i].distance,ro[i].contactnumber,ro[i].emailid,r[i].address);
	}
}
